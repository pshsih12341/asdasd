import React from 'react';
import { useControlledState, useForkRef, useUniqId } from '../..';
import { eventBroker } from '../../../components/utils/event-broker';
import { useFormResetHandler } from '../useFormResetHandler';
export function useRadio({ name, value, checked, defaultChecked, disabled, controlRef, controlProps, onUpdate, onChange, onFocus, onBlur, id, }) {
    const controlId = useUniqId();
    const innerControlRef = React.useRef(null);
    const [isChecked, setCheckedState] = useControlledState(checked, defaultChecked !== null && defaultChecked !== void 0 ? defaultChecked : false, onUpdate);
    const formFieldRef = useFormResetHandler({ initialValue: isChecked, onReset: setCheckedState });
    const handleRef = useForkRef(controlRef, innerControlRef, formFieldRef);
    const handleChange = (event) => {
        setCheckedState(event.target.checked);
        if (onChange) {
            onChange(event);
        }
    };
    const onChangeCapture = (event) => {
        eventBroker.publish({
            componentId: 'Radio',
            eventId: 'click',
            domEvent: event,
        });
    };
    const inputProps = Object.assign(Object.assign({}, controlProps), { name: name || controlId, value,
        id,
        onFocus,
        onBlur,
        disabled, type: 'radio', onChange: handleChange, onChangeCapture: onChangeCapture, checked, defaultChecked: defaultChecked, 'aria-checked': isChecked, ref: handleRef });
    return { checked: isChecked, inputProps };
}
