'use client';
import React from 'react';
import { useForkRef } from '../../hooks';
import { useTooltipVisible } from '../../hooks/private';
import { Popup } from '../Popup';
import { Text } from '../Text';
import { block } from '../utils/cn';
import './Tooltip.css';
const b = block('tooltip');
const DEFAULT_PLACEMENT = ['bottom', 'top'];
export const Tooltip = (props) => {
    const { children, content, disabled, placement = DEFAULT_PLACEMENT, qa, id, className, style, disablePortal, contentClassName, openDelay = 1000, closeDelay, } = props;
    const [anchorElement, setAnchorElement] = React.useState(null);
    const tooltipVisible = useTooltipVisible(anchorElement, {
        openDelay,
        closeDelay,
        preventTriggerOnFocus: true,
    });
    const renderPopup = () => {
        return (React.createElement(Popup, { id: id, role: "tooltip", className: b(null, className), style: style, open: tooltipVisible && !disabled, placement: placement, anchorRef: { current: anchorElement }, disablePortal: disablePortal, disableEscapeKeyDown: true, disableOutsideClick: true, disableLayer: true, qa: qa },
            React.createElement("div", { className: b('content', contentClassName) },
                React.createElement(Text, { variant: "body-short", color: "complementary" }, content))));
    };
    const child = React.Children.only(children);
    const childRef = child.ref;
    const ref = useForkRef(setAnchorElement, childRef);
    return (React.createElement(React.Fragment, null,
        React.cloneElement(child, { ref }),
        anchorElement ? renderPopup() : null));
};
