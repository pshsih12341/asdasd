"use strict";
'use client';
Object.defineProperty(exports, "__esModule", { value: true });
exports.Sheet = void 0;
const tslib_1 = require("tslib");
const react_1 = tslib_1.__importDefault(require("react"));
const hooks_1 = require("../../hooks");
const Portal_1 = require("../Portal/Portal");
const SheetContent_1 = require("./SheetContent");
const constants_1 = require("./constants");
require("./Sheet.css");
const Sheet = ({ children, onClose, visible, id, title, className, contentClassName, swipeAreaClassName, allowHideOnContentScroll, hideTopBar, qa, }) => {
    const [open, setOpen] = react_1.default.useState(visible);
    const [prevVisible, setPrevVisible] = react_1.default.useState(visible);
    (0, hooks_1.useBodyScrollLock)({ enabled: open });
    if (!prevVisible && visible) {
        setOpen(true);
    }
    if (visible !== prevVisible) {
        setPrevVisible(visible);
    }
    const hideSheet = () => {
        if (onClose) {
            onClose();
        }
        setOpen(false);
    };
    if (!open) {
        return null;
    }
    return (react_1.default.createElement(Portal_1.Portal, null,
        react_1.default.createElement("div", { "data-qa": qa, className: (0, constants_1.sheetBlock)(null, className) },
            react_1.default.createElement(SheetContent_1.SheetContentContainer, { id: id, content: children, contentClassName: contentClassName, swipeAreaClassName: swipeAreaClassName, title: title, visible: visible, allowHideOnContentScroll: allowHideOnContentScroll, hideTopBar: hideTopBar, hideSheet: hideSheet }))));
};
exports.Sheet = Sheet;
