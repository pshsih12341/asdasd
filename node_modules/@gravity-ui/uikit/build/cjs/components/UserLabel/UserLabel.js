"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.UserLabel = void 0;
const tslib_1 = require("tslib");
const react_1 = tslib_1.__importDefault(require("react"));
const icons_1 = require("@gravity-ui/icons");
const Avatar_1 = require("../Avatar");
const Icon_1 = require("../Icon");
const cn_1 = require("../utils/cn");
const i18n_1 = tslib_1.__importDefault(require("./i18n"));
require("./UserLabel.css");
const b = (0, cn_1.block)('user-label');
exports.UserLabel = react_1.default.forwardRef(({ type = 'person', avatar, children, view = 'outlined', onClick, onCloseClick, className, style, qa, size = 's', }, ref) => {
    const clickable = Boolean(onClick);
    const closeable = Boolean(onCloseClick);
    const MainComponent = clickable ? 'button' : 'div';
    let avatarView = null;
    let avatarProps;
    if (typeof avatar === 'string') {
        avatarProps = {
            imgUrl: avatar,
        };
    }
    else if (avatar && !react_1.default.isValidElement(avatar)) {
        avatarProps = avatar;
    }
    else if (!avatar && typeof children === 'string') {
        avatarProps = {
            text: children,
        };
    }
    switch (type) {
        case 'email':
            avatarView = react_1.default.createElement(Avatar_1.Avatar, Object.assign({ icon: icons_1.Envelope }, (avatarProps || {}), { size: size }));
            break;
        case 'empty':
            avatarView = null;
            break;
        case 'person':
        default:
            if (react_1.default.isValidElement(avatar)) {
                avatarView = avatar;
            }
            else if (avatarProps) {
                avatarView = react_1.default.createElement(Avatar_1.Avatar, Object.assign({}, avatarProps, { size: size }));
            }
            break;
    }
    return (react_1.default.createElement("div", { className: b({
            view,
            empty: !avatarView,
            clickable,
            closeable,
            size,
        }, className), style: style, "data-qa": qa, ref: ref },
        react_1.default.createElement(MainComponent, { className: b('main'), type: clickable ? 'button' : undefined, onClick: onClick },
            avatarView ? react_1.default.createElement("div", { className: b('avatar') }, avatarView) : null,
            react_1.default.createElement("div", { className: b('text') }, children)),
        onCloseClick ? (react_1.default.createElement("button", { className: b('close'), type: "button", "aria-label": (0, i18n_1.default)('label_remove-button'), onClick: onCloseClick },
            react_1.default.createElement(Icon_1.Icon, { className: b('close-icon'), data: icons_1.Xmark, size: 12 }))) : null));
});
exports.UserLabel.displayName = 'UserLabel';
